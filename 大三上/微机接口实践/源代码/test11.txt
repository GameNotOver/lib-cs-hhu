CODE SEGMENT
ASSUME CS:CODE
ORG 1000H
START:JMP INIT
DATA DW 653D,262D,294D,330D,349D,392D,440D,494D,523D,587D,653D

INIT:MOV DX,0063H;初始化8255
MOV AL,80H
OUT DX,AL
MOV AL,0B6H
OUT 4BH,AL

AGAIN:MOV DX,0DFH;获取不大于9的键值
IN AL,DX
AND AL,01H
JZ AGAIN
MOV CX,0FFFH
LOOP $

MOV DX,0DEH
IN AL,DX
CMP AL,9D
JG AGAIN

GONZ:MOV BL,2D
MUL BL
MOV BL,AL
MOV BH,0
MOV CX,DATA[BX];取得频率值
MOV DX,00FH
MOV AX,4240H
DIV CX;获取频率因子存于AX
OUT 4AH,AL
MOV AL,AH
OUT 4AH,AL
CALL OPEN
MOV CX,8FFFH;声音延时
LOOP $
CALL CLOSE
JMP AGAIN

OPEN PROC;开扬声器
MOV AL,00000001B
OUT 61H,AL
RET
OPEN ENDP

CLOSE PROC;关扬声器
MOV AL,0
OUT 61H,AL
RET
CLOSE ENDP

CODE ENDS
END START
     
